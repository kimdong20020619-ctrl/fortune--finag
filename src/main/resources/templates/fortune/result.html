<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ìš´ì„¸ ê²°ê³¼</title>

    <style>
        body {
            background: #f7f9fc;
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        }

        .container {
            width: 700px;
            margin: 60px auto;
            background: #fff;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        }

        .title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 15px;
            text-align: center;
        }

        .info {
            text-align: center;
            margin-bottom: 25px;
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .tab-wrapper {
            display: flex;
            justify-content: space-between;
            margin: 25px 0 15px 0;
            gap: 6px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px 0;
            background: #e5e7eb;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }

        .tab-btn.active {
            background: #6366f1;
            color: #ffffff;
        }

        .fortune-card {
            background: #fafafa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .value {
            margin-top: 5px;
            font-size: 15px;
            color: #444;
            line-height: 1.6;
        }

        .lucky {
            margin-top: 15px;
            padding: 15px;
            background: #eef2ff;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.6;
        }

        /* â­ ìš´ì„¸ ì ìˆ˜ + ê²Œì´ì§€ ë°” */
        .score-box {
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .score-title {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 6px;
        }

        .score-bar {
            width: 100%;
            height: 14px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: #6366f1;
            border-radius: 999px;
            transition: width 0.8s ease;
        }

        .score-value {
            margin-top: 4px;
            font-size: 13px;
            color: #333;
            font-weight: 700;
            text-align: right;
        }

        /* ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ */
        .home-btn {
            margin-top: 24px;
            width: 100%;
            padding: 12px 0;
            border-radius: 12px;
            border: none;
            background: #111827;
            color: #ffffff;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
        }

        .home-btn:hover {
            background: #030712;
        }
    </style>
</head>

<body>
<div class="container">

    <h1 class="title">ğŸ”® ìš´ì„¸ ê²°ê³¼</h1>

    <!-- ì…ë ¥ ì •ë³´ í‘œì‹œ -->
    <div class="info">
        ìƒì¼:
        <span th:text="${birthDate}"></span><br/>
        ì‹œê°„:
        <span th:text="${birthTime}"></span><br/>
        ë³„ìë¦¬:
        <span th:text="${zodiac}"></span> /
        ë :
        <span th:text="${chinese}"></span>
    </div>

    <!-- â­ ìš´ì„¸ ì ìˆ˜ & ê²Œì´ì§€ ë°” -->
    <div class="score-box" th:if="${fortune != null}">
        <div class="score-title">
            <span th:switch="${category}">
                <span th:case="'TODAY'">ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì ìˆ˜</span>
                <span th:case="'TOMORROW'">ë‚´ì¼ì˜ ìš´ì„¸ ì ìˆ˜</span>
                <span th:case="'WEEK'">ì´ë²ˆ ì£¼ ìš´ì„¸ ì ìˆ˜</span>
                <span th:case="'MONTH'">ì´ë‹¬ì˜ ìš´ì„¸ ì ìˆ˜</span>
                <span th:case="'YEAR'">ì˜¬í•´ì˜ ìš´ì„¸ ì ìˆ˜</span>
                <span th:case="*">ìš´ì„¸ ì ìˆ˜</span>
            </span>
        </div>
        <div class="score-bar">
            <div class="score-fill"
                 th:style="'width:' + ${fortune.score} + '%;'">
            </div>
        </div>
        <div class="score-value"
             th:text="${fortune.score + 'ì '}">
        </div>
    </div>

    <!-- âœ… ì¹´í…Œê³ ë¦¬ ì „í™˜ìš© í¼ (íƒ­ ë²„íŠ¼ë“¤ì´ ë‹¤ ì´ í¼ì„ submit í•¨) -->
    <form th:action="@{/fortune/result}" method="post">
        <!-- ì´ì „ ì…ë ¥ê°’ ìœ ì§€ìš© hidden í•„ë“œ -->
        <input type="hidden" name="birth" th:value="${birthDate}">
        <input type="hidden" name="gender" th:value="${gender}">
        <input type="hidden" name="birthTime" th:value="${birthTime}">
        <input type="hidden" name="calendar" th:value="${calendarType}">

        <!-- íƒ­ ë²„íŠ¼ -->
        <div class="tab-wrapper">
            <button type="submit" name="category" value="TODAY"
                    class="tab-btn"
                    th:classappend="${category}=='TODAY' ? ' active'">
                ì˜¤ëŠ˜
            </button>

            <button type="submit" name="category" value="TOMORROW"
                    class="tab-btn"
                    th:classappend="${category}=='TOMORROW' ? ' active'">
                ë‚´ì¼
            </button>

            <button type="submit" name="category" value="WEEK"
                    class="tab-btn"
                    th:classappend="${category}=='WEEK' ? ' active'">
                ì´ë²ˆì£¼
            </button>

            <button type="submit" name="category" value="MONTH"
                    class="tab-btn"
                    th:classappend="${category}=='MONTH' ? ' active'">
                ì´ë‹¬
            </button>

            <button type="submit" name="category" value="YEAR"
                    class="tab-btn"
                    th:classappend="${category}=='YEAR' ? ' active'">
                ì˜¬í•´
            </button>
        </div>
    </form>

    <!-- ì´ìš´ -->
    <div class="fortune-card" th:if="${fortune != null}">
        <div class="card-title">ğŸ”® ì´ìš´</div>
        <div class="value" th:text="${fortune.summary}"></div>
    </div>

    <!-- ì• ì •ìš´ -->
    <div class="fortune-card" th:if="${fortune != null}">
        <div class="card-title">â¤ï¸ ì• ì •ìš´</div>
        <div class="value" th:text="${fortune.love}"></div>
    </div>

    <!-- ê¸ˆì „ìš´ -->
    <div class="fortune-card" th:if="${fortune != null}">
        <div class="card-title">ğŸ’ ê¸ˆì „ìš´</div>
        <div class="value" th:text="${fortune.money}"></div>
    </div>

    <!-- ì§ì¥ìš´ -->
    <div class="fortune-card" th:if="${fortune != null}">
        <div class="card-title">ğŸ“ ì§ì¥Â·ë¹„ì¦ˆë‹ˆìŠ¤ ìš´</div>
        <div class="value" th:text="${fortune.job}"></div>
    </div>

    <!-- ê±´ê°•ìš´ -->
    <div class="fortune-card" th:if="${fortune != null}">
        <div class="card-title">ğŸ’ª ê±´ê°•ìš´</div>
        <div class="value" th:text="${fortune.health}"></div>
    </div>

    <!-- í–‰ìš´ ìš”ì†Œ -->
    <div class="lucky" th:if="${fortune != null}">
        <div><b>ğŸ¨ í–‰ìš´ì˜ ìƒ‰ :</b> <span th:text="${fortune.luckyColor}"></span></div>
        <div><b>ğŸ”¢ í–‰ìš´ì˜ ìˆ«ì :</b> <span th:text="${fortune.luckyNumber}"></span></div>
        <div><b>ğŸ í–‰ìš´ì˜ ì•„ì´í…œ :</b> <span th:text="${fortune.luckyItem}"></span></div>
    </div>

    <!-- ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
    <button class="home-btn" type="button" onclick="window.location.href='/fortune'">
        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
    </button>

</div>
</body>
</html>
